function Swipe(e){function t(e){return"undefined"==typeof e}function i(e){var t=[],i=L;if("object"!=typeof e)return L;for(var l in L)t.push(l);for(var o in e)t.indexOf(o)!==-1&&(i[o]=e[o]);return i}function l(e){if("string"!=typeof e)throw new Error("查询元素类型不合法");return e.indexOf(".")!==-1?e:"."+e}function o(){x.container=y.dom,x.itemList=S.dom,x.length=S.length,x.MaxWidth=S.totalWidth,x.screenWidth=w.totalWidth}function a(e,t){y.dom.setAttribute("style","-webkit-transform: translate3d("+e+"px, 0px, 0px); transition-duration :"+t+"ms;")}function n(e){var t=0;return e-M.x>0?0===b.x?(t=e-M.x,b.x=e):(t=e-b.x,b.x=e):0===b.x?(t=Math.abs(e)-Math.abs(M.x),b.x=e):(t=Math.abs(e)-Math.abs(b.x),b.x=e),t}function s(e){var t=e;return t>0?t=0:Math.abs(t)+w.totalWidth>S.totalWidth&&(t=-(S.totalWidth-w.totalWidth)),t}function r(e){var t=e;return t-k.rollBack>0?t=k.rollBack:-t+w.totalWidth-k.rollBack>S.totalWidth&&(t=-(S.totalWidth-w.totalWidth)-k.rollBack),t}function d(e,t){return e+k.rollBack>t?e=t-k.rollBack:-e+k.rollBack>t&&(e=-(t-k.rollBack)),e}function c(e){if(0!==S.page.length)for(var t=0;t<S.length;t++)S.page[t].style.backgroundColor="transparent",t===e&&(S.page[t].style.backgroundColor=k.pageListClass.active)}function h(e){y.war=document.querySelectorAll(k.queryClass)[0],y.dom=document.querySelectorAll(k.queryClass+" .swipe-container")[0],y.height=y.dom.clientHeight,y.width=y.dom.clientWidth,S.dom=document.querySelectorAll(k.queryClass+" .swipe-container .swipe-item"),S.length=S.dom.length;for(var t=0,i=S.dom.length;t<i;t++)S.totalWidth+=S.dom[t].clientWidth;u(),f(),o()}function f(){if(k.pageListMode){for(var e=document.createElement("ul"),t=0;t<S.length;t++){var i=document.createElement("li");for(var l in k.pageListClass)"active"!==l&&(i.style[l]=k.pageListClass[l]);0===t&&(i.style.backgroundColor=k.pageListClass.active),S.page.push(i),i.setAttribute("data-index",t),i.addEventListener("click",m),e.appendChild(i)}var o=document.createElement("div");o.className="swipe-page-list",o.appendChild(e),y.war.appendChild(o)}}function m(e){e.stopPropagation();var t=parseInt(e.srcElement.getAttribute("data-index"));W.clickPage(t)}function u(){y.war.addEventListener("touchstart",v,!1),y.war.addEventListener("touchmove",p,!1),y.war.addEventListener("touchend",g,!1)}function v(e){e.stopPropagation(),k.pageListMode||e.preventDefault(),M.x=e.changedTouches[0].clientX,M.y=e.changedTouches[0].clientY,M.time=(new Date).getTime(),b.x=0,b.y=0}function p(e){e.stopPropagation(),e.preventDefault();var t=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY;k.pressSwipeFlag&&(k.inlineMode?D.pressSwipe(t,i):W.pressSwipe(t,i))}function g(e){e.stopPropagation(),k.pageListMode||e.preventDefault(),B.x=e.changedTouches[0].clientX,B.y=e.changedTouches[0].clientY,B.time=(new Date).getTime(),k.inlineMode?D.letGoSwipe():W.letGoSwipe(e.srcElement)}var x={},L={borderColor:"#ff8000",borderWidth:"1px",width:"16px",height:"16px",marginLeft:"5px",active:"#f30"},k={queryClass:t(e.queryClass)?".swipe-war":l(e.queryClass),quickIsSlowDelay:t(e.quickIsSlowDelay)?300:e.quickIsSlowDelay,slideTime:t(e.slideTime)?500:e.slideTime,rollBack:t(e.rollBack)?100:e.rollBack,rollBackDelay:t(e.rollBackDelay)?300:e.rollBackDelay,pressSwipeFlag:!!t(e.pressSwipeFlag)||e.pressSwipeFlag,slowSlideFlag:!t(e.pressSwipeFlag),inlineMode:!t(e.inlineMode)&&e.inlineMode,pageListMode:!t(e.pageListMode)&&e.pageListMode,pageListClass:t(e.pageListClass)?L:i(e.pageListClass),blockSlideLimit:t(e.blockSlideLimit)?.3:e.blockSlideLimit},w={totalWidth:window.screen.width,halfWidth:window.screen.width/2},y={war:"",dom:"",height:0,width:0,moveLeft:0,moveTop:0},S={dom:[],page:[],length:0,totalWidth:0},M={x:0,y:0,time:0},b={x:0,y:0},B={x:0,y:0,time:0};x.getMoveValue=function(){return y.moveLeft},x.getBlockIndex=function(){return k.inlineMode?void console.log("必须处于块移动模式","swipe"):W.index},x.setMoveValue=function(e,t){if("number"==typeof e){if(e>0)return console.log("输入值大于零则默认等于0","swipe"),e=0,y.moveLeft=e,a(y.moveLeft,k.rollBackDelay),!1;if(e<-(S.totalWidth-S.dom[S.length-1].clientWidth))return console.log("输入值最小不能小于item集合的总长度","swipe"),e=-(S.totalWidth-S.dom[S.length-1].clientWidth),y.moveLeft=e,a(y.moveLeft,k.rollBackDelay),!1;if(t&&!k.inlineMode)for(var i=0,l=0;l<S.length;l++){if(Math.abs(e)<i)return S.dom[l].clientWidth-(i-Math.abs(e))>S.dom[l-1].clientWidth*k.blockSlideLimit?(y.moveLeft=-i,a(y.moveLeft,k.rollBackDelay),W.index=l):(y.moveLeft=-(i-S.dom[l-1].clientWidth),a(y.moveLeft,k.rollBackDelay),W.index=l-1),!1;i+=S.dom[l].clientWidth}else y.moveLeft=e,a(y.moveLeft,k.rollBackDelay)}else console.log("输入值必须是数值类型","swipe")},x.setIndexMove=function(e){if(k.pageListMode&&!k.inlineMode){if(e<0||e>S.length-1)return console.log("索引越界","swipe"),!1;W.clickPage(e)}},x.resetConfig=function(e,i){k.quickIsSlowDelay=t(e.quickIsSlowDelay)?k.quickIsSlowDelay:e.quickIsSlowDelay,k.slideTime=t(e.slideTime)?k.slideTime:e.slideTime,k.rollBack=t(e.rollBack)?k.rollBack:e.rollBack,k.rollBackDelay=t(e.rollBackDelay)?k.rollBackDelay:e.rollBackDelay,k.pressSwipeFlag=t(e.pressSwipeFlag)?k.pressSwipeFlag:e.pressSwipeFlag,k.slowSlideFlag=t(e.slowSlideFlag)?k.slowSlideFlag:e.slowSlideFlag,k.blockSlideLimit=t(e.blockSlideLimit)?k.blockSlideLimit:e.blockSlideLimit,i&&h()};var D={pressSwipe:function(e,t){Math.abs(e-M.x)>Math.abs(t-M.y)&&(y.moveLeft+=n(e),y.moveLeft=r(y.moveLeft),a(y.moveLeft,k.rollBackDelay))},letGoSwipe:function(){var e=B.time-M.time;e<k.quickIsSlowDelay?this.quickSlide():k.slowSlideFlag?this.slowSlide():this.rollBackSlide()},quickSlide:function(){var e=B.x-M.x,t=B.y-M.y;Math.abs(e)>Math.abs(t)&&(y.moveLeft+=2*e,y.moveLeft=s(y.moveLeft),a(y.moveLeft,k.rollBackDelay))},slowSlide:function(){var e=B.x-M.x,t=B.y-M.y;Math.abs(e)>Math.abs(t)&&(y.moveLeft+=e+e/5,y.moveLeft=s(y.moveLeft),a(y.moveLeft,k.rollBackDelay))},rollBackSlide:function(){var e=B.x-M.x,t=B.y-M.y;Math.abs(e)>Math.abs(t)&&(y.moveLeft=s(y.moveLeft),a(y.moveLeft,k.rollBackDelay))}},W={index:0,moveleft:0,pressSwipe:function(e,t){if(Math.abs(e-M.x)>Math.abs(t-M.y)){this.moveleft+=n(e);var i=S.dom[this.index].clientWidth;this.moveleft=d(this.moveleft,i),a(y.moveLeft+this.moveleft,k.rollBackDelay)}},letGoSwipe:function(e){var t=B.time-M.time;t<k.quickIsSlowDelay?k.pageListMode||"LI"===e.tagName?this.rollBackSlide():this.quickSlide():this.rollBackSlide(),this.moveleft=0},quickSlide:function(){var e=B.x-M.x,t=B.y-M.y;Math.abs(e)>Math.abs(t)&&(y.moveLeft=this.slideMove(!1,e),y.moveLeft=s(y.moveLeft),a(y.moveLeft,k.rollBackDelay))},rollBackSlide:function(){var e=B.x-M.x,t=B.y-M.y;Math.abs(e)>Math.abs(t)&&(y.moveLeft=this.slideMove(!0,e,this.moveleft),y.moveLeft=s(y.moveLeft),a(y.moveLeft,k.rollBackDelay))},clickPage:function(e){var t=0;if(0===e)t=S.dom[e].clientWidth;else for(var i=0;i<e;i++)t+=S.dom[i].clientWidth;y.moveLeft=-t,this.index=e,a(y.moveLeft,k.rollBackDelay),c(this.index)},slideMove:function(e,t,i){var l=y.moveLeft,o=0;if(e){if(Math.abs(i)>S.dom[this.index].clientWidth*k.blockSlideLimit){n=0===this.index?1:this.index+1;for(var a=0;a<n;a++)o+=S.dom[a].clientWidth;t>0?(l+=o-Math.abs(y.moveLeft),this.index--,this.index<0&&(this.index=0)):(l-=o-Math.abs(y.moveLeft),this.index++,this.index>S.length-1&&(this.index=S.length-1))}}else if(k.pressSwipeFlag){for(var n=0===this.index?1:this.index+1,a=0;a<n;a++)o+=S.dom[a].clientWidth;t>0?(l+=o-Math.abs(y.moveLeft),this.index--,this.index<0&&(this.index=0)):(l-=o-Math.abs(y.moveLeft),this.index++,this.index>S.length-1&&(this.index=S.length-1))}else o=S.dom[this.index].clientWidth,t>0?(l+=o,this.index--,this.index<0&&(this.index=0)):(l-=o,this.index++,this.index>S.length-1&&(this.index=S.length-1));return k.pageListMode&&c(this.index),l}};return h(),x}