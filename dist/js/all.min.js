function Swipe(e){function t(e){return"undefined"==typeof e}function i(e,t){v.dom.setAttribute("style","-webkit-transform: translate3d("+e+"px, 0px, 0px); transition-duration :"+t+"ms;")}function o(e){var t=0;return e-u.x>0?0===w.x?(t=e-u.x,w.x=e):(t=e-w.x,w.x=e):0===w.x?(t=Math.abs(e)-Math.abs(u.x),w.x=e):(t=Math.abs(e)-Math.abs(w.x),w.x=e),t}function l(e){var t=e;return t>0?t=0:Math.abs(t)+m.totalWidth>x.totalWidth&&(t=-(x.totalWidth-m.totalWidth)),t}function a(e){var t=e;return t-f.rollBack>0?t=f.rollBack:-t+m.totalWidth-f.rollBack>x.totalWidth&&(t=-(x.totalWidth-m.totalWidth)-f.rollBack),t}function n(e){v.war=document.querySelectorAll(".swipe-war")[0],v.dom=document.querySelectorAll(".swipe-container")[0],v.height=v.dom.clientHeight,v.width=v.dom.clientWidth,x.dom=document.querySelectorAll(".swipe-container .swipe-item"),x.length=x.dom.length;for(var t=0,i=x.dom.length;t<i;t++)x.totalWidth+=x.dom[t].clientWidth;console.log(f),console.log(v),console.log(x),console.log(m),h()}function h(){v.war.addEventListener("touchstart",s,!1),v.war.addEventListener("touchmove",d,!1),v.war.addEventListener("touchend",c,!1)}function s(e){e.stopPropagation(),e.preventDefault(),u.x=e.changedTouches[0].clientX,u.y=e.changedTouches[0].clientY,u.time=(new Date).getTime(),w.x=0,w.y=0}function d(e){e.stopPropagation(),e.preventDefault();var t=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY;f.pressSwipeFlag&&(f.inlineMode?L.pressSwipe(t,i):y.pressSwipe(t,i))}function c(e){e.stopPropagation(),e.preventDefault(),p.x=e.changedTouches[0].clientX,p.y=e.changedTouches[0].clientY,p.time=(new Date).getTime(),f.inlineMode?L.letGoSwipe():y.letGoSwipe()}var r={},f={quickIsSlowDelay:t(e.quickIsSlowDelay)?300:e.quickIsSlowDelay,slideTime:t(e.slideTime)?500:e.slideTime,rollBack:t(e.rollBack)?100:e.rollBack,rollBackDelay:t(e.rollBackDelay)?300:e.rollBackDelay,pressSwipeFlag:!!t(e.pressSwipeFlag)||e.pressSwipeFlag,slowSlideFlag:!t(e.pressSwipeFlag),inlineMode:!t(e.inlineMode)&&e.inlineMode},m={totalWidth:window.screen.width,halfWidth:window.screen.width/2},v={war:"",dom:"",height:0,width:0,moveLeft:0,moveTop:0},x={dom:"",length:0,totalWidth:0},u={x:0,y:0,time:0},w={x:0,y:0},p={x:0,y:0,time:0},L={pressSwipe:function(e,t){Math.abs(e-u.x)>Math.abs(t-u.y)&&(v.moveLeft+=o(e),v.moveLeft=a(v.moveLeft),i(v.moveLeft,f.rollBackDelay))},letGoSwipe:function(){var e=p.time-u.time;e<f.quickIsSlowDelay?this.quickSlide():f.slowSlideFlag?this.slowSlide():this.rollBackSlide()},quickSlide:function(){var e=p.x-u.x,t=p.y-u.y;Math.abs(e)>Math.abs(t)&&(v.moveLeft+=2*e,v.moveLeft=l(v.moveLeft),i(v.moveLeft,f.rollBackDelay))},slowSlide:function(){var e=p.x-u.x,t=p.y-u.y;Math.abs(e)>Math.abs(t)&&(v.moveLeft+=e+e/5,v.moveLeft=l(v.moveLeft),i(v.moveLeft,f.rollBackDelay))},rollBackSlide:function(){var e=p.x-u.x,t=p.y-u.y;Math.abs(e)>Math.abs(t)&&(v.moveLeft=l(v.moveLeft),i(v.moveLeft,f.rollBackDelay))}},y={index:0,moveleft:0,pressSwipe:function(e,t){if(Math.abs(e-u.x)>Math.abs(t-u.y)){this.moveleft+=o(e);var l=x.dom[this.index].clientWidth;this.moveleft+f.rollBack>l?this.moveleft=l-f.rollBack:-this.moveleft+f.rollBack>l&&(this.moveleft=-(l-f.rollBack)),i(v.moveLeft+this.moveleft,f.rollBackDelay)}},letGoSwipe:function(){var e=p.time-u.time;e<f.quickIsSlowDelay?this.quickSlide():this.rollBackSlide(),this.moveleft=0},quickSlide:function(){var e=p.x-u.x,t=p.y-u.y;if(Math.abs(e)>Math.abs(t)){if(f.pressSwipeFlag){for(var o=0,l=0===this.index?1:this.index+1,a=0;a<l;a++)o+=x.dom[a].clientWidth;e>0?(v.moveLeft+=o-Math.abs(v.moveLeft),this.index--,this.index<0&&(this.index=0)):(v.moveLeft-=o-Math.abs(v.moveLeft),this.index++,this.index>x.length-1&&(this.index=x.length-1))}else{var o=x.dom[this.index].clientWidth;e>0?(v.moveLeft+=o,this.index--,this.index<0&&(this.index=0)):(v.moveLeft-=o,this.index++,this.index>x.length-1&&(this.index=x.length-1))}-v.moveLeft+m.totalWidth>=x.totalWidth?v.moveLeft=-(x.totalWidth-m.totalWidth):v.moveLeft>0&&(v.moveLeft=0),i(v.moveLeft,f.rollBackDelay)}},rollBackSlide:function(){var e=p.x-u.x,t=p.y-u.y;if(Math.abs(e)>Math.abs(t)){if(Math.abs(this.moveleft)>x.dom[this.index].clientWidth/3){for(var o=0,l=0===this.index?1:this.index+1,a=0;a<l;a++)o+=x.dom[a].clientWidth;e>0?(v.moveLeft+=o-Math.abs(v.moveLeft),this.index--,this.index<0&&(this.index=0)):(v.moveLeft-=o-Math.abs(v.moveLeft),this.index++,this.index>x.length-1&&(this.index=x.length-1))}v.moveLeft>0?v.moveLeft=0:-v.moveLeft+m.totalWidth>=x.totalWidth&&(v.moveLeft=-(x.totalWidth-m.totalWidth)),i(v.moveLeft,f.rollBackDelay)}}};return n(),r}window.onload=function(){Swipe({rollBack:150,inlineMode:!0})};