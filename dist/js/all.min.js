function Swipe(e){function t(e){return"undefined"==typeof e}function i(e){var t=["borderColor","borderWidth","width","height","active"],i=p;if("object"!=typeof e)return p;for(var l in e)t.indexOf(l)!==-1&&(i[l]=e[l]);return i}function l(e){if("string"!=typeof e)throw new Error("查询元素类型不合法");return e.indexOf(".")!==-1?e:"."+e}function o(e,t){x.dom.setAttribute("style","-webkit-transform: translate3d("+e+"px, 0px, 0px); transition-duration :"+t+"ms;")}function a(e){var t=0;return e-y.x>0?0===L.x?(t=e-y.x,L.x=e):(t=e-L.x,L.x=e):0===L.x?(t=Math.abs(e)-Math.abs(y.x),L.x=e):(t=Math.abs(e)-Math.abs(L.x),L.x=e),t}function n(e){var t=e;return t>0?t=0:Math.abs(t)+g.totalWidth>k.totalWidth&&(t=-(k.totalWidth-g.totalWidth)),t}function s(e){var t=e;return t-w.rollBack>0?t=w.rollBack:-t+g.totalWidth-w.rollBack>k.totalWidth&&(t=-(k.totalWidth-g.totalWidth)-w.rollBack),t}function r(e,t){return e+w.rollBack>t?e=t-w.rollBack:-e+w.rollBack>t&&(e=-(t-w.rollBack)),e}function d(e){x.war=document.querySelectorAll(w.queryClass)[0],x.dom=document.querySelectorAll(w.queryClass+" .swipe-container")[0],x.height=x.dom.clientHeight,x.width=x.dom.clientWidth,k.dom=document.querySelectorAll(w.queryClass+" .swipe-container .swipe-item"),k.length=k.dom.length;for(var t=0,i=k.dom.length;t<i;t++)k.totalWidth+=k.dom[t].clientWidth;c(),h()}function c(){x.war.addEventListener("touchstart",f,!1),x.war.addEventListener("touchmove",m,!1),x.war.addEventListener("touchend",u,!1)}function h(){if(w.pageListMode){for(var e=document.createElement("ul"),t=0;t<k.length;t++){var i=document.createElement("li");for(var l in w.pageListClass)"active"!==l&&(i.style[l]=w.pageListClass[l]);e.appendChild(i)}var o=document.createElement("div");o.className="swipe-page-list",o.appendChild(e),x.war.appendChild(o)}}function f(e){e.stopPropagation(),e.preventDefault(),y.x=e.changedTouches[0].clientX,y.y=e.changedTouches[0].clientY,y.time=(new Date).getTime(),L.x=0,L.y=0}function m(e){e.stopPropagation(),e.preventDefault();var t=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY;w.pressSwipeFlag&&(w.inlineMode?M.pressSwipe(t,i):b.pressSwipe(t,i))}function u(e){e.stopPropagation(),e.preventDefault(),S.x=e.changedTouches[0].clientX,S.y=e.changedTouches[0].clientY,S.time=(new Date).getTime(),w.inlineMode?M.letGoSwipe():b.letGoSwipe()}var v={},p={borderColor:"#ff8000",borderWidth:"1px",width:"16px",height:"16px",active:"#f30"},w={queryClass:t(e.queryClass)?".swipe-war":l(e.queryClass),quickIsSlowDelay:t(e.quickIsSlowDelay)?300:e.quickIsSlowDelay,slideTime:t(e.slideTime)?500:e.slideTime,rollBack:t(e.rollBack)?100:e.rollBack,rollBackDelay:t(e.rollBackDelay)?300:e.rollBackDelay,pressSwipeFlag:!!t(e.pressSwipeFlag)||e.pressSwipeFlag,slowSlideFlag:!t(e.pressSwipeFlag),inlineMode:!t(e.inlineMode)&&e.inlineMode,pageListMode:!t(e.pageListMode)&&e.pageListMode,pageListClass:t(e.pageListClass)?p:i(e.pageListClass),blockSlideLimit:t(e.blockSlideLimit)?.3:e.blockSlideLimit},g={totalWidth:window.screen.width,halfWidth:window.screen.width/2},x={war:"",dom:"",height:0,width:0,moveLeft:0,moveTop:0},k={dom:"",length:0,totalWidth:0},y={x:0,y:0,time:0},L={x:0,y:0},S={x:0,y:0,time:0};v.getMoveValue=function(){return x.moveLeft},v.getBlockIndex=function(){return w.inlineMode?void console.log("必须处于块移动模式","swipe"):b.index},v.setMoveValue=function(e,t){if("number"==typeof e){if(e>0)return console.log("输入值大于零则默认等于0","swipe"),e=0,x.moveLeft=e,o(x.moveLeft,w.rollBackDelay),!1;if(e<-(k.totalWidth-k.dom[k.length-1].clientWidth))return console.log("输入值最小不能小于item集合的总长度","swipe"),e=-(k.totalWidth-k.dom[k.length-1].clientWidth),x.moveLeft=e,o(x.moveLeft,w.rollBackDelay),!1;if(t&&!w.inlineMode)for(var i=0,l=0;l<k.length;l++){if(Math.abs(e)<i)return k.dom[l].clientWidth-(i-Math.abs(e))>k.dom[l-1].clientWidth*w.blockSlideLimit?(x.moveLeft=-i,o(x.moveLeft,w.rollBackDelay),b.index=l):(x.moveLeft=-(i-k.dom[l-1].clientWidth),o(x.moveLeft,w.rollBackDelay),b.index=l-1),!1;i+=k.dom[l].clientWidth}else x.moveLeft=e,o(x.moveLeft,w.rollBackDelay)}else console.log("输入值必须是数值类型","swipe")},v.resetConfig=function(e,i){w.quickIsSlowDelay=t(e.quickIsSlowDelay)?w.quickIsSlowDelay:e.quickIsSlowDelay,w.slideTime=t(e.slideTime)?w.slideTime:e.slideTime,w.rollBack=t(e.rollBack)?w.rollBack:e.rollBack,w.rollBackDelay=t(e.rollBackDelay)?w.rollBackDelay:e.rollBackDelay,w.pressSwipeFlag=t(e.pressSwipeFlag)?w.pressSwipeFlag:e.pressSwipeFlag,w.slowSlideFlag=t(e.slowSlideFlag)?w.slowSlideFlag:e.slowSlideFlag,w.inlineMode=t(e.inlineMode)?w.inlineMode:e.inlineMode,w.blockSlideLimit=t(e.blockSlideLimit)?w.blockSlideLimit:e.blockSlideLimit,i&&d()};var M={pressSwipe:function(e,t){Math.abs(e-y.x)>Math.abs(t-y.y)&&(x.moveLeft+=a(e),x.moveLeft=s(x.moveLeft),o(x.moveLeft,w.rollBackDelay))},letGoSwipe:function(){var e=S.time-y.time;e<w.quickIsSlowDelay?this.quickSlide():w.slowSlideFlag?this.slowSlide():this.rollBackSlide()},quickSlide:function(){var e=S.x-y.x,t=S.y-y.y;Math.abs(e)>Math.abs(t)&&(x.moveLeft+=2*e,x.moveLeft=n(x.moveLeft),o(x.moveLeft,w.rollBackDelay))},slowSlide:function(){var e=S.x-y.x,t=S.y-y.y;Math.abs(e)>Math.abs(t)&&(x.moveLeft+=e+e/5,x.moveLeft=n(x.moveLeft),o(x.moveLeft,w.rollBackDelay))},rollBackSlide:function(){var e=S.x-y.x,t=S.y-y.y;Math.abs(e)>Math.abs(t)&&(x.moveLeft=n(x.moveLeft),o(x.moveLeft,w.rollBackDelay))}},b={index:0,moveleft:0,pressSwipe:function(e,t){if(Math.abs(e-y.x)>Math.abs(t-y.y)){this.moveleft+=a(e);var i=k.dom[this.index].clientWidth;this.moveleft=r(this.moveleft,i),o(x.moveLeft+this.moveleft,w.rollBackDelay)}},letGoSwipe:function(){var e=S.time-y.time;e<w.quickIsSlowDelay?this.quickSlide():this.rollBackSlide(),this.moveleft=0},quickSlide:function(){var e=S.x-y.x,t=S.y-y.y;Math.abs(e)>Math.abs(t)&&(x.moveLeft=this.slideMove(!1,e),x.moveLeft=n(x.moveLeft),o(x.moveLeft,w.rollBackDelay))},rollBackSlide:function(){var e=S.x-y.x,t=S.y-y.y;Math.abs(e)>Math.abs(t)&&(x.moveLeft=this.slideMove(!0,e,this.moveleft),x.moveLeft=n(x.moveLeft),o(x.moveLeft,w.rollBackDelay))},slideMove:function(e,t,i){var l=x.moveLeft,o=0;if(e){if(Math.abs(i)>k.dom[this.index].clientWidth*w.blockSlideLimit){n=0===this.index?1:this.index+1;for(var a=0;a<n;a++)o+=k.dom[a].clientWidth;t>0?(l+=o-Math.abs(x.moveLeft),this.index--,this.index<0&&(this.index=0)):(l-=o-Math.abs(x.moveLeft),this.index++,this.index>k.length-1&&(this.index=k.length-1))}}else if(w.pressSwipeFlag){for(var n=0===this.index?1:this.index+1,a=0;a<n;a++)o+=k.dom[a].clientWidth;t>0?(l+=o-Math.abs(x.moveLeft),this.index--,this.index<0&&(this.index=0)):(l-=o-Math.abs(x.moveLeft),this.index++,this.index>k.length-1&&(this.index=k.length-1))}else o=k.dom[this.index].clientWidth,t>0?(l+=o,this.index--,this.index<0&&(this.index=0)):(l-=o,this.index++,this.index>k.length-1&&(this.index=k.length-1));return l}};return d(),v}window.onload=function(){var e=Swipe({queryClass:"list-container-one",rollBack:150});Swipe({queryClass:"list-container-two",pageListMode:!0,rollBack:150}),Swipe({queryClass:"list-tab",inlineMode:!0,pageListClass:{borderColor:"#fff",fontSize:"18px"}});setTimeout(function(){e.setMoveValue(-1690,!0),console.log(e.getMoveValue()),console.log(e.getBlockIndex())},2e3)};