function Swipe(e){function t(e){return"undefined"==typeof e}function i(e,t){u.dom.setAttribute("style","-webkit-transform: translate3d("+e+"px, 0px, 0px); transition-duration :"+t+"ms;")}function o(e){var t=0;return e-w.x>0?0===p.x?(t=e-w.x,p.x=e):(t=e-p.x,p.x=e):0===p.x?(t=Math.abs(e)-Math.abs(w.x),p.x=e):(t=Math.abs(e)-Math.abs(p.x),p.x=e),t}function l(e){var t=e;return t>0?t=0:Math.abs(t)+v.totalWidth>x.totalWidth&&(t=-(x.totalWidth-v.totalWidth)),t}function a(e){var t=e;return t-f.rollBack>0?t=f.rollBack:-t+v.totalWidth-f.rollBack>x.totalWidth&&(t=-(x.totalWidth-v.totalWidth)-f.rollBack),t}function n(e,t){return e+f.rollBack>t?e=t-f.rollBack:-e+f.rollBack>t&&(e=-(t-f.rollBack)),e}function s(e){u.war=document.querySelectorAll(".swipe-war")[0],u.dom=document.querySelectorAll(".swipe-container")[0],u.height=u.dom.clientHeight,u.width=u.dom.clientWidth,x.dom=document.querySelectorAll(".swipe-container .swipe-item"),x.length=x.dom.length;for(var t=0,i=x.dom.length;t<i;t++)x.totalWidth+=x.dom[t].clientWidth;console.log(f),console.log(u),console.log(x),console.log(v),h()}function h(){u.war.addEventListener("touchstart",d,!1),u.war.addEventListener("touchmove",c,!1),u.war.addEventListener("touchend",r,!1)}function d(e){e.stopPropagation(),e.preventDefault(),w.x=e.changedTouches[0].clientX,w.y=e.changedTouches[0].clientY,w.time=(new Date).getTime(),p.x=0,p.y=0}function c(e){e.stopPropagation(),e.preventDefault();var t=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY;f.pressSwipeFlag&&(f.inlineMode?S.pressSwipe(t,i):y.pressSwipe(t,i))}function r(e){e.stopPropagation(),e.preventDefault(),k.x=e.changedTouches[0].clientX,k.y=e.changedTouches[0].clientY,k.time=(new Date).getTime(),f.inlineMode?S.letGoSwipe():y.letGoSwipe()}var m={},f={quickIsSlowDelay:t(e.quickIsSlowDelay)?300:e.quickIsSlowDelay,slideTime:t(e.slideTime)?500:e.slideTime,rollBack:t(e.rollBack)?100:e.rollBack,rollBackDelay:t(e.rollBackDelay)?300:e.rollBackDelay,pressSwipeFlag:!!t(e.pressSwipeFlag)||e.pressSwipeFlag,slowSlideFlag:!t(e.pressSwipeFlag),inlineMode:!t(e.inlineMode)&&e.inlineMode,blockSlideLimit:t(e.blockSlideLimit)?.3:e.blockSlideLimit},v={totalWidth:window.screen.width,halfWidth:window.screen.width/2},u={war:"",dom:"",height:0,width:0,moveLeft:0,moveTop:0},x={dom:"",length:0,totalWidth:0},w={x:0,y:0,time:0},p={x:0,y:0},k={x:0,y:0,time:0},S={pressSwipe:function(e,t){Math.abs(e-w.x)>Math.abs(t-w.y)&&(u.moveLeft+=o(e),u.moveLeft=a(u.moveLeft),i(u.moveLeft,f.rollBackDelay))},letGoSwipe:function(){var e=k.time-w.time;e<f.quickIsSlowDelay?this.quickSlide():f.slowSlideFlag?this.slowSlide():this.rollBackSlide()},quickSlide:function(){var e=k.x-w.x,t=k.y-w.y;Math.abs(e)>Math.abs(t)&&(u.moveLeft+=2*e,u.moveLeft=l(u.moveLeft),i(u.moveLeft,f.rollBackDelay))},slowSlide:function(){var e=k.x-w.x,t=k.y-w.y;Math.abs(e)>Math.abs(t)&&(u.moveLeft+=e+e/5,u.moveLeft=l(u.moveLeft),i(u.moveLeft,f.rollBackDelay))},rollBackSlide:function(){var e=k.x-w.x,t=k.y-w.y;Math.abs(e)>Math.abs(t)&&(u.moveLeft=l(u.moveLeft),i(u.moveLeft,f.rollBackDelay))}},y={index:0,moveleft:0,pressSwipe:function(e,t){if(Math.abs(e-w.x)>Math.abs(t-w.y)){this.moveleft+=o(e);var l=x.dom[this.index].clientWidth;this.moveleft=n(this.moveleft,l),i(u.moveLeft+this.moveleft,f.rollBackDelay)}},letGoSwipe:function(){var e=k.time-w.time;e<f.quickIsSlowDelay?this.quickSlide():this.rollBackSlide(),this.moveleft=0},quickSlide:function(){var e=k.x-w.x,t=k.y-w.y;Math.abs(e)>Math.abs(t)&&(u.moveLeft=this.slideMove(!1,e),u.moveLeft=l(u.moveLeft),i(u.moveLeft,f.rollBackDelay))},rollBackSlide:function(){var e=k.x-w.x,t=k.y-w.y;Math.abs(e)>Math.abs(t)&&(u.moveLeft=this.slideMove(!0,e,this.moveleft),u.moveLeft=l(u.moveLeft),i(u.moveLeft,f.rollBackDelay))},slideMove:function(e,t,i){var o=u.moveLeft,l=0;if(e){if(Math.abs(i)>x.dom[this.index].clientWidth*f.blockSlideLimit){n=0===this.index?1:this.index+1;for(var a=0;a<n;a++)l+=x.dom[a].clientWidth;t>0?(o+=l-Math.abs(u.moveLeft),this.index--,this.index<0&&(this.index=0)):(o-=l-Math.abs(u.moveLeft),this.index++,this.index>x.length-1&&(this.index=x.length-1))}}else if(f.pressSwipeFlag){for(var n=0===this.index?1:this.index+1,a=0;a<n;a++)l+=x.dom[a].clientWidth;t>0?(o+=l-Math.abs(u.moveLeft),this.index--,this.index<0&&(this.index=0)):(o-=l-Math.abs(u.moveLeft),this.index++,this.index>x.length-1&&(this.index=x.length-1))}else l=x.dom[this.index].clientWidth,t>0?(o+=l,this.index--,this.index<0&&(this.index=0)):(o-=l,this.index++,this.index>x.length-1&&(this.index=x.length-1));return o}};return s(),m}window.onload=function(){Swipe({rollBack:150})};