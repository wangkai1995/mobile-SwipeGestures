function Swipe(e){function t(e){return"undefined"==typeof e}function i(e,t){m.dom.setAttribute("style","-webkit-transform: translate3d("+e+"px, 0px, 0px); transition-duration :"+t+"ms;")}function o(e){m.war=document.querySelectorAll(".swipe-war")[0],m.dom=document.querySelectorAll(".swipe-container")[0],m.height=m.dom.clientHeight,m.width=m.dom.clientWidth,f.dom=document.querySelectorAll(".swipe-container .swipe-item"),f.length=f.dom.length;for(var t=0,i=f.dom.length;t<i;t++)f.totalWidth+=f.dom[t].clientWidth;console.log(d),console.log(m),console.log(f),console.log(c),l()}function l(){m.war.addEventListener("touchstart",a,!1),m.war.addEventListener("touchmove",n,!1),m.war.addEventListener("touchend",h,!1)}function a(e){e.stopPropagation(),e.preventDefault(),r.x=e.changedTouches[0].clientX,r.y=e.changedTouches[0].clientY,r.time=(new Date).getTime(),v.x=0,v.y=0}function n(e){e.stopPropagation(),e.preventDefault();var t=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY;d.pressSwipeFlag&&(d.inlineMode?L.pressSwipe(t,i):u.pressSwipe(t,i))}function h(e){e.stopPropagation(),e.preventDefault(),x.x=e.changedTouches[0].clientX,x.y=e.changedTouches[0].clientY,x.time=(new Date).getTime(),d.inlineMode?L.letGoSwipe():u.letGoSwipe()}var s={},d={quickIsSlowDelay:t(e.quickIsSlowDelay)?300:e.quickIsSlowDelay,slideTime:t(e.slideTime)?500:e.slideTime,rollBack:t(e.rollBack)?100:e.rollBack,rollBackDelay:t(e.rollBackDelay)?300:e.rollBackDelay,pressSwipeFlag:!!t(e.pressSwipeFlag)||e.pressSwipeFlag,slowSlideFlag:!t(e.pressSwipeFlag),inlineMode:!t(e.inlineMode)&&e.inlineMode},c={totalWidth:window.screen.width,halfWidth:window.screen.width/2},m={war:"",dom:"",height:0,width:0,moveLeft:0,moveTop:0},f={dom:"",length:0,totalWidth:0},r={x:0,y:0,time:0},v={x:0,y:0},x={x:0,y:0,time:0},L={pressSwipe:function(e,t){Math.abs(e-r.x)>Math.abs(t-r.y)?(e-r.x>0?0===v.x?(m.moveLeft+=e-r.x,v.x=e):(m.moveLeft+=e-v.x,v.x=e):0===v.x?(m.moveLeft+=Math.abs(e)-Math.abs(r.x),v.x=e):(m.moveLeft+=Math.abs(e)-Math.abs(v.x),v.x=e),m.moveLeft-d.rollBack>0?m.moveLeft=d.rollBack:-m.moveLeft+c.totalWidth-d.rollBack>f.totalWidth&&(m.moveLeft=-(f.totalWidth-c.totalWidth)-d.rollBack),i(m.moveLeft,d.rollBackDelay)):console.log(Math.abs(t-r.y),"y")},letGoSwipe:function(){var e=x.time-r.time;e<d.quickIsSlowDelay?this.quickSlide():d.slowSlideFlag?this.slowSlide():this.rollBackSlide()},quickSlide:function(){var e=x.x-r.x,t=x.y-r.y;Math.abs(e)>Math.abs(t)&&(m.moveLeft+=2*e,m.moveLeft>0?m.moveLeft=0:Math.abs(m.moveLeft)+c.totalWidth>f.totalWidth&&(m.moveLeft=-(f.totalWidth-c.totalWidth)),i(m.moveLeft,d.rollBackDelay))},slowSlide:function(){var e=x.x-r.x,t=x.y-r.y;Math.abs(e)>Math.abs(t)&&(m.moveLeft+=e+e/5,m.moveLeft>0?m.moveLeft=0:Math.abs(m.moveLeft)+c.totalWidth>f.totalWidth&&(m.moveLeft=-(f.totalWidth-c.totalWidth)),i(m.moveLeft,d.rollBackDelay))},rollBackSlide:function(){var e=x.x-r.x,t=x.y-r.y;Math.abs(e)>Math.abs(t)&&(m.moveLeft>0?m.moveLeft=0:Math.abs(m.moveLeft)+c.totalWidth>f.totalWidth&&(m.moveLeft=-(f.totalWidth-c.totalWidth)),i(m.moveLeft,d.rollBackDelay))}},u={index:0,moveleft:0,pressSwipe:function(e,t){if(Math.abs(e-r.x)>Math.abs(t-r.y)){e-r.x>0?0===v.x?(this.moveleft+=e-r.x,v.x=e):(this.moveleft+=e-v.x,v.x=e):0===v.x?(this.moveleft+=Math.abs(e)-Math.abs(r.x),v.x=e):(this.moveleft+=Math.abs(e)-Math.abs(v.x),v.x=e);var o=f.dom[this.index].clientWidth;this.moveleft+d.rollBack>o?this.moveleft=o-d.rollBack:-this.moveleft+d.rollBack>o&&(this.moveleft=-(o-d.rollBack)),i(m.moveLeft+this.moveleft,d.rollBackDelay)}else console.log(Math.abs(t-r.y),"y")},letGoSwipe:function(){var e=x.time-r.time;e<d.quickIsSlowDelay?this.quickSlide():this.rollBackSlide(),this.moveleft=0},quickSlide:function(){var e=x.x-r.x,t=x.y-r.y;if(Math.abs(e)>Math.abs(t)){if(d.pressSwipeFlag){for(var o=0,l=0===this.index?1:this.index+1,a=0;a<l;a++)o+=f.dom[a].clientWidth;e>0?(m.moveLeft+=o-Math.abs(m.moveLeft),this.index--,this.index<0&&(this.index=0)):(m.moveLeft-=o-Math.abs(m.moveLeft),this.index++,this.index>f.length-1&&(this.index=f.length-1))}else{var o=f.dom[this.index].clientWidth;e>0?(m.moveLeft+=o,this.index--,this.index<0&&(this.index=0)):(m.moveLeft-=o,this.index++,this.index>f.length-1&&(this.index=f.length-1))}-m.moveLeft+c.totalWidth>=f.totalWidth?m.moveLeft=-(f.totalWidth-c.totalWidth):m.moveLeft>0&&(m.moveLeft=0),i(m.moveLeft,d.rollBackDelay)}},rollBackSlide:function(){var e=x.x-r.x,t=x.y-r.y;if(Math.abs(e)>Math.abs(t)){if(Math.abs(this.moveleft)>f.dom[this.index].clientWidth/3){for(var o=0,l=0===this.index?1:this.index+1,a=0;a<l;a++)o+=f.dom[a].clientWidth;e>0?(m.moveLeft+=o-Math.abs(m.moveLeft),this.index--,this.index<0&&(this.index=0)):(m.moveLeft-=o-Math.abs(m.moveLeft),this.index++,this.index>f.length-1&&(this.index=f.length-1))}m.moveLeft>0?m.moveLeft=0:-m.moveLeft+c.totalWidth>=f.totalWidth&&(m.moveLeft=-(f.totalWidth-c.totalWidth)),i(m.moveLeft,d.rollBackDelay)}}};return o(),s}window.onload=function(){Swipe({rollBack:150})};